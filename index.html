<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kinfold Inns ‚Äì Owner Portal</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè†</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      --dark: #0f1419;
      --card: #1a1f2e;
      --card-hover: #222838;
      --border: #2a3040;
      --text: #e8eaed;
      --text-dim: #8b92a5;
      --windmill: #3b82f6;
      --windmill-glow: rgba(59,130,246,0.15);
      --eightbells: #a855f7;
      --eightbells-glow: rgba(168,85,247,0.15);
      --accent-invoice: #10b981;
      --accent-paper: #f59e0b;
    }

    html, body {
      height: 100%;
      font-family: 'DM Sans', system-ui, sans-serif;
      background: var(--dark);
      color: var(--text);
      overflow-x: hidden;
    }

    /* ‚îÄ‚îÄ Landing page ‚îÄ‚îÄ */
    .landing {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
      position: relative;
    }

    /* Subtle background texture */
    .landing::before {
      content: '';
      position: absolute;
      inset: 0;
      background: 
        radial-gradient(ellipse at 20% 50%, var(--windmill-glow) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 50%, var(--eightbells-glow) 0%, transparent 50%);
      pointer-events: none;
    }

    .brand {
      text-align: center;
      margin-bottom: 48px;
      position: relative;
    }
    .brand-icon { font-size: 56px; margin-bottom: 12px; }
    .brand h1 {
      font-family: 'DM Serif Display', serif;
      font-size: 42px;
      font-weight: 400;
      letter-spacing: 1px;
      color: #fff;
      margin-bottom: 6px;
    }
    .brand p {
      font-size: 14px;
      font-weight: 500;
      letter-spacing: 4px;
      text-transform: uppercase;
      color: var(--text-dim);
    }

    /* Pub selector */
    .pub-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      max-width: 800px;
      width: 100%;
      position: relative;
    }

    .pub-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 32px 28px;
      transition: all 0.3s;
    }

    .pub-card:hover {
      background: var(--card-hover);
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(0,0,0,0.3);
    }

    .pub-card.windmill:hover { border-color: var(--windmill); box-shadow: 0 12px 40px rgba(59,130,246,0.15); }
    .pub-card.eightbells:hover { border-color: var(--eightbells); box-shadow: 0 12px 40px rgba(168,85,247,0.15); }

    .pub-icon { font-size: 36px; margin-bottom: 12px; }
    .pub-name {
      font-family: 'DM Serif Display', serif;
      font-size: 22px;
      color: #fff;
      margin-bottom: 4px;
    }
    .pub-location {
      font-size: 12px;
      color: var(--text-dim);
      letter-spacing: 1px;
      text-transform: uppercase;
      margin-bottom: 24px;
    }

    .pub-links {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .pub-link {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 18px;
      border-radius: 10px;
      text-decoration: none;
      color: var(--text);
      font-size: 14px;
      font-weight: 600;
      transition: all 0.2s;
      border: 1px solid var(--border);
      background: transparent;
    }

    .pub-link:hover {
      background: rgba(255,255,255,0.05);
      border-color: rgba(255,255,255,0.15);
    }

    .pub-link .link-icon {
      width: 36px;
      height: 36px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      flex-shrink: 0;
    }

    .pub-link.invoicing .link-icon { background: rgba(16,185,129,0.15); }
    .pub-link.paperwork .link-icon { background: rgba(245,158,11,0.15); }

    .link-label { flex: 1; }
    .link-label small { display: block; font-size: 11px; font-weight: 400; color: var(--text-dim); margin-top: 2px; }
    
    .link-arrow { color: var(--text-dim); font-size: 18px; }

    /* ‚îÄ‚îÄ App view (iframe) ‚îÄ‚îÄ */
    .app-view {
      display: none;
      position: fixed;
      inset: 0;
      z-index: 50;
      background: var(--dark);
      flex-direction: column;
    }
    .app-view.active { display: flex; }

    .app-bar {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 16px;
      background: var(--card);
      border-bottom: 1px solid var(--border);
      flex-shrink: 0;
    }
    .app-bar-back {
      background: none;
      border: 1px solid var(--border);
      color: var(--text);
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      font-family: inherit;
      transition: all 0.2s;
    }
    .app-bar-back:hover { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.15); }
    .app-bar-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--text);
    }
    .app-bar-pub {
      font-size: 12px;
      color: var(--text-dim);
      margin-left: auto;
    }

    .app-frame { flex: 1; width: 100%; border: none; }

    /* Loading overlay */
    .app-loader {
      position: absolute;
      inset: 0;
      top: 48px;
      background: var(--dark);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10;
      transition: opacity 0.5s;
    }
    .app-loader.hidden { opacity: 0; pointer-events: none; }
    .spinner { border: 3px solid var(--border); border-top: 3px solid var(--windmill); border-radius: 50%; width: 32px; height: 32px; animation: sp 0.8s linear infinite; margin-bottom: 12px; }
    @keyframes sp { to { transform: rotate(360deg); } }
    .app-loader p { color: var(--text-dim); font-size: 13px; }

    /* Footer */
    .footer {
      text-align: center;
      padding: 32px;
      font-size: 12px;
      color: var(--text-dim);
      position: relative;
    }
    .footer a { color: var(--text-dim); text-decoration: none; }

    /* Responsive */
    @media (max-width: 640px) {
      .pub-grid { grid-template-columns: 1fr; gap: 16px; }
      .brand h1 { font-size: 32px; }
      .pub-card { padding: 24px 20px; }
      .pub-name { font-size: 20px; }
      .landing { padding: 32px 16px; justify-content: flex-start; padding-top: 60px; }
    }
  </style>
</head>
<body>

  <!-- LANDING PAGE -->
  <div class="landing" id="landing">
    <div class="brand">
      <div class="brand-icon">üè†</div>
      <h1>Kinfold Inns</h1>
      <p>Owner Portal</p>
    </div>

    <div class="pub-grid">
      <!-- WINDMILL INN -->
      <div class="pub-card windmill">
        <div class="pub-icon">üç∫</div>
        <div class="pub-name">The Windmill Inn</div>
        <div class="pub-location">Littleworth</div>
        <div class="pub-links">
          <a class="pub-link invoicing" href="#" onclick="openApp('invoicing','Windmill Inn');return false;">
            <span class="link-icon">üìä</span>
            <span class="link-label">Invoicing<small>Supplier invoices, products & pricing</small></span>
            <span class="link-arrow">‚Ä∫</span>
          </a>
          <a class="pub-link paperwork" href="#" onclick="openApp('paperwork-windmill','Windmill Inn');return false;">
            <span class="link-icon">üìã</span>
            <span class="link-label">Paperwork<small>Weekly data, cash & expenses</small></span>
            <span class="link-arrow">‚Ä∫</span>
          </a>
        </div>
      </div>

      <!-- EIGHT BELLS -->
      <div class="pub-card eightbells">
        <div class="pub-icon">üîî</div>
        <div class="pub-name">The Eight Bells</div>
        <div class="pub-location">Bolney</div>
        <div class="pub-links">
          <a class="pub-link invoicing" href="#" onclick="openApp('invoicing','Eight Bells');return false;">
            <span class="link-icon">üìä</span>
            <span class="link-label">Invoicing<small>Supplier invoices, products & pricing</small></span>
            <span class="link-arrow">‚Ä∫</span>
          </a>
          <a class="pub-link paperwork" href="#" onclick="openApp('paperwork-eightbells','Eight Bells');return false;">
            <span class="link-icon">üìã</span>
            <span class="link-label">Paperwork<small>Weekly data, cash & expenses</small></span>
            <span class="link-arrow">‚Ä∫</span>
          </a>
        </div>
      </div>
    </div>

    <div class="footer">
      Kinfold Inns Ltd
    </div>
  </div>

  <!-- APP VIEW (iframe container) -->
  <div class="app-view" id="appView">
    <div class="app-bar">
      <button class="app-bar-back" onclick="closeApp()">‚Üê Back</button>
      <span class="app-bar-title" id="appTitle">-</span>
      <span class="app-bar-pub" id="appPub">-</span>
    </div>
    <div class="app-loader" id="appLoader">
      <div class="spinner"></div>
      <p>Loading...</p>
    </div>
    <iframe class="app-frame" id="appFrame" src="about:blank" allow="clipboard-write" sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-top-navigation"></iframe>
  </div>

  <script>
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    //  CONFIGURE YOUR URLS HERE
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    const URLS = {
      // The invoice processing system
      'invoicing': 'https://script.google.com/macros/s/AKfycbw_o2Xb6kidks5eKUyT-C2XoQyQ0QlpVKt895FwUNlulh9q0YLFuO7VYVMImULi3SrE/exec',
      
      // Windmill weekly paperwork system (owner view)
      'paperwork-windmill': 'https://script.google.com/macros/s/AKfycbxgzF9DVJQ2sBPVGMWCfXsaAn5-3SUzWXuURGbu4lE__ccPowt0vWmQKqY43qtyGXgP/exec?page=owner',
      
      // Eight Bells weekly paperwork system (owner view)
      'paperwork-eightbells': 'https://script.google.com/macros/s/AKfycbz4Q-UMy3o8Z6bjYrQMsWbRB4mSs1iHqz2CHAgYhT9QvakBY0pnutRbyQ2YUwpFnYtIww/exec?page=owner'
    };
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    const TITLES = {
      'invoicing': 'üìä Invoicing',
      'paperwork-windmill': 'üìã Paperwork',
      'paperwork-eightbells': 'üìã Paperwork'
    };

    function openApp(system, pubName) {
      const url = URLS[system];
      if (!url || url.includes('_HERE')) {
        alert('URL not configured for: ' + system + '\n\nEdit the URLS object in index.html');
        return;
      }

      document.getElementById('appTitle').textContent = TITLES[system] || system;
      document.getElementById('appPub').textContent = pubName;
      document.getElementById('appLoader').classList.remove('hidden');
      
      const frame = document.getElementById('appFrame');
      frame.src = url;
      frame.onload = () => setTimeout(() => document.getElementById('appLoader').classList.add('hidden'), 600);
      
      // Fallback: hide loader after 15s
      setTimeout(() => document.getElementById('appLoader').classList.add('hidden'), 15000);

      document.getElementById('landing').style.display = 'none';
      document.getElementById('appView').classList.add('active');
    }

    function closeApp() {
      document.getElementById('appView').classList.remove('active');
      document.getElementById('landing').style.display = '';
      document.getElementById('appFrame').src = 'about:blank';
    }
  </script>
</body>
</html>
